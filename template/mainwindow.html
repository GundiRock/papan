<link rel="import" href="../bower_components/app-route/app-location.html"
<link rel="import" href="../bower_components/app-route/app-route.html"
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">

<link rel="import" href="drawermenu.html">
<link rel="import" href="game.html">
<link rel="import" href="profile.html">
<link rel="import" href="user.html">

<dom-module id="papan-main-window">
  <link rel="import" type="css" href="mainwindow.css">

  <template>
    <!-- This probably should go in the index.html -->
    <app-location
      use-hash-as-path
      route="{{route}}">
    </app-location>
    <papan-user-data
      user="{{user}}">
    </papan-user-data>
    <app-route
      route="{{route}}"
      pattern="/"
      tail="{{pagesRoute}}"
      active="{{pageActive}}">
    </app-route>

    <app-header reveals>
      <app-toolbar>
        <paper-icon-button icon="menu" onclick="appdrawer.toggle()"></paper-icon-button>
        <div main-title>Papan</div>
        <paper-icon-button icon="bug-report" onclick="toggleDebug()"></paper-icon-button>
        <a href="https://github.com/grumpycoders.papan" style="display: none;" id="github-link">
            <paper-icon-button icon="link"></paper-icon-button>
        </a>
        <template is="dom-if" if="{{user.islogged}}">
          <div>[[user.username]]</div>
            <paper-button on-tap="signout">
              Sign Out
            </paper-button>
        </template>
        <template is="dom-if" if="{{!user.islogged}}">
          <div id="login">
            <paper-button on-tap="showlogin">
              Log In / Sign In
            </paper-button>
          </div>
        </template>
        <div id="fakelogin">
          <paper-button on-tap="showuserdata">
            DBG:USEREDIT
          </paper-button>
        </div>
      </app-toolbar>
    </app-header>
    <papan-drawer-menu
      id="appdrawer"
      menu-selected="{{pageSelected}}"
      user="{{user}}"
      route="{{route}}">
    </papan-drawer-menu>

    <iron-pages id="content" selected="{{route.path}}" attr-for-selected="name">
      <section name="profile">
        <papan-user-profile id="profile-view" user="{{user}}">
        </papan-user-profile>
      </section>
      <section name="game">
        <papan-game-page>
        </papan-game-page>
      </section>
      <div name="friends" id="friends">List of friends</div>
      <div name="games" id="games">List of local games</div>
      <div name="servers" id="servers">List of servers</div>
      <div name="main" id="main-view"></div>
    </iron-pages>

    <paper-dialog id="dbglogindata" modal>
      <div>DBG:USEREDIT</div>
      <paper-input name="username" label="Username" value="{{user.username}}"></paper-input>
      <paper-checkbox name="logged" checked="{{user.islogged}}">Is Logged in</paper-checkbox>
      <paper-button dialog-confirm autofocus>Close</paper-button>
    </paper-dialog>
  </template>

  <script>
    Polymer({
      is: "papan-main-window",

      showuserdata: function() {
        // why ?
        this.$.dbglogindata.open()
      },

      showlogin: function() {

      },

      signout: function() {
        
      }
    })
  </script>
</dom-module>
